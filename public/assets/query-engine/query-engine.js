(function(){var p,q,n,s,r,v,u,f,y,l={}.hasOwnProperty,h=[].slice,w=function(b,a){function g(){this.constructor=b}for(var c in a)l.call(a,c)&&(b[c]=a[c]);g.prototype=a.prototype;b.prototype=new g;b.__super__=a.prototype;return b},x=[].indexOf||function(b){for(var a=0,g=this.length;a<g;a++)if(a in this&&this[a]===b)return a;return-1},t=function(b,a){return function(){return b.apply(a,arguments)}};try{p=null!=(u="undefined"!==typeof module&&null!==module?require("backbone"):this.Backbone)?u:null}catch(z){p=
null}f={toString:function(b){return Object.prototype.toString.call(b)},isPlainObject:function(b){return f.isObject(b)&&b.__proto__===Object.prototype},isObject:function(b){return b&&"object"===typeof b},isError:function(b){return b instanceof Error},isDate:function(b){return"[object Date]"===f.toString(b)},isArguments:function(b){return"[object Arguments]"===f.toString(b)},isFunction:function(b){return"[object Function]"===f.toString(b)},isRegExp:function(b){return"[object RegExp]"===f.toString(b)},
isArray:function(b){return null!=Array.isArray?Array.isArray(b):"[object Array]"===f.toString(b)},isNumber:function(b){return"number"===typeof b||"[object Number]"===f.toString(b)},isString:function(b){return"string"===typeof b||"[object String]"===f.toString(b)},isBoolean:function(b){return!0===b||!1===b||"[object Boolean]"===f.toString(b)},isNull:function(b){return null===b},isUndefined:function(b){return"undefined"===typeof b},isDefined:function(b){return"undefined"!==typeof b},isEmpty:function(b){return null!=
b},isObjectEmpty:function(b){var a,g;a=!0;for(g in b)if(l.call(b,g)){a=!1;break}return a},isComparable:function(b){return f.isNumber(b)||f.isDate(b)},isEqual:function(b,a){return JSON.stringify(b)===JSON.stringify(a)},clone:function(){var b;b=1<=arguments.length?h.call(arguments,0):[];return f.shallowExtendPlainObjects.apply(f,[{}].concat(h.call(b)))},extend:function(){var b;b=1<=arguments.length?h.call(arguments,0):[];return f.shallowExtendPlainObjects.apply(f,b)},shallowExtendPlainObjects:function(){var b,
a,g,c,e,d,f;c=arguments[0];g=2<=arguments.length?h.call(arguments,1):[];d=0;for(f=g.length;d<f;d++)for(b in(a=g[d])||(a={}),a)l.call(a,b)&&(e=a[b],c[b]=e);return c},get:function(b,a){return null!=b.get?b.get(a):b[a]},safeRegex:function(b){return!1===b?"false":!0===b?"true":null===b?"null":(b||"").replace("(.)","\\$1")},createRegex:function(b){return RegExp(b,"ig")},createSafeRegex:function(b){return f.createRegex(f.safeRegex(b))},toArray:function(b){var a,g,c;c=[];if("undefined"!==typeof b)if(f.isArray(b))c=
b.slice();else if(f.isObject(b))for(g in b)l.call(b,g)&&(a=b[g],c.push(a));else c.push(b);return c},toArrayGroup:function(b){var a,g,c,e;e=[];if("undefined"!==typeof b)if(f.isArray(b))e=b.slice();else if(f.isObject(b))for(g in b)l.call(b,g)&&(a=b[g],c={},c[g]=a,e.push(c));else e.push(b);return e},generateComparator:function(b){var a;a=function(g){if(g){if(f.isFunction(g))return g;if(f.isArray(g))return function(c,b){var d,f,k,l;f=k=d=0;for(l=g.length;k<l&&!(d=g[f],d=a(d)(c,b));f=++k);return d};if(f.isObject(g))return function(a,
b){var d,m,k,h,n;k=0;for(h in g)if(l.call(g,h)&&(n=g[h],d=f.get(a,h),m=f.get(b,h),d===m?k=0:d<m?k=-1:d>m&&(k=1),-1===n&&(k*=-1),k))break;return k};throw Error("Unknown comparator type");}throw Error("Cannot sort without a comparator");};return a(b)}};n=function(b){function a(a){var c,b,d;a=f.toArray(a);c=b=0;for(d=a.length;b<d;c=++b)c=a[c],this.push(c)}w(a,b);a.prototype.hasIn=function(a){var c,b,d;a=f.toArray(a);b=0;for(d=this.length;b<d;b++)if(c=this[b],0<=x.call(a,c))return!0;return!1};a.prototype.hasAll=
function(a){var c,b,d,m,k;a=f.toArray(a);b=c=!0;m=0;for(k=this.length;m<k;m++)d=this[m],c=!1,0>x.call(a,d)&&(b=!1);c&&(b=!1);return b};a.prototype.isSame=function(a){a=f.toArray(a);return this.sort().join()===a.sort().join()};return a}(Array);v=null==p?null:function(b){function a(){this.onParentReset=t(this.onParentReset,this);this.onParentAdd=t(this.onParentAdd,this);this.onParentRemove=t(this.onParentRemove,this);this.onParentChange=t(this.onParentChange,this);this.onChange=t(this.onChange,this);
return y=a.__super__.constructor.apply(this,arguments)}w(a,b);a.prototype.model=p.Model;a.prototype.initialize=function(a,c){var b,d,f;null==this.options&&(this.options={});f=q.prototype;for(b in f)l.call(f,b)&&(d=f[b],null==this[b]&&(this[b]=d));null!=this.comparator&&this.setComparator(this.comparator);this.applyCriteriaOptions(c);null!=c&&(null!=c.parentCollection&&(this.options.parentCollection=c.parentCollection),null!=c.live&&(this.options.live=c.live),this.live());return this};a.prototype.getComparator=
function(){return this.comparator};a.prototype.setComparator=function(a){this.comparator=a=f.generateComparator(a);return this};a.prototype.createChildCollection=function(g,c){c||(c={});c.parentCollection=this;null==c.collection&&(c.collection=this.collection||a);null==c.comparator&&(c.comparator=c.collection.prototype.comparator||this.comparator);return new c.collection(g,c)};a.prototype.createLiveChildCollection=function(a,c){c||(c={});c.live=!0;return this.createChildCollection(a,c)};a.prototype.hasParentCollection=
function(){return null!=this.options.parentCollection};a.prototype.getParentCollection=function(){return this.options.parentCollection};a.prototype.setParentCollection=function(a,c){if(!c&&this.options.parentCollection===a)return this;this.options.parentCollection=a;this.live();return this};a.prototype.hasModel=function(a){var c,b;a||(a={});return null!=a.id&&this.get(a.id)?!0:null!=a.cid&&(null!=(c=null!=(b=this._byCid)?b[a.cid]:void 0)?c:this.get(a.cid))?!0:!1};a.prototype.safeRemove=function(a){this.hasModel(a)&&
this.remove(a);return this};a.prototype.safeAdd=function(a){this.hasModel(a)||this.add(a);return this};a.prototype.sortCollection=function(a){if(a)a=f.generateComparator(a),this.models.sort(a);else if(a=this.getComparator())this.models.sort(a);else throw Error("You need a comparator to sort");return this};a.prototype.sortArray=function(a){var c;c=this.toJSON();if(a)a=f.generateComparator(a),c.sort(a);else if(a=this.getComparator())c.sort(a);else throw Error("You need a comparator to sort");return c};
a.prototype.findAll=function(){var a,c,b;a=1<=arguments.length?h.call(arguments,0):[];a.length?1===a.length&&a[0]instanceof q?c=a[0].options:(b=a[0],c=a[1],a=a[2],c={comparator:c,paging:a,queries:{find:b}}):c=null;return this.createChildCollection([],c).query()};a.prototype.findAllLive=function(){var a,c,b;a=1<=arguments.length?h.call(arguments,0):[];a.length?1===a.length&&a[0]instanceof q?c=a[0].options:(b=a[0],c=a[1],a=a[2],c={comparator:c,paging:a,queries:{find:b}}):c=null;return this.createLiveChildCollection([],
c).query()};a.prototype.findOne=function(){var a,c,b;a=1<=arguments.length?h.call(arguments,0):[];a.length?1===a.length&&a[0]instanceof q?c=a[0].options:(b=a[0],c=a[1],a=a[2],c={comparator:c,paging:a,queries:{find:b}}):c=null;c=this.testModels(this.models,c);return 0!==(null!=c?c.length:void 0)?c[0]:null};a.prototype.query=function(){var a,c;a=1<=arguments.length?h.call(arguments,0):[];1===a.length&&(c=a[0]instanceof q?a[0].options:{paging:a[0]});a=this.queryModels(c);this.reset(a);return this};a.prototype.queryModels=
function(){var a,c;a=1<=arguments.length?h.call(arguments,0):[];a=this.extractCriteriaOptions.apply(this,a);c=(this.getParentCollection()||this).models;return this.testModels(c,a)};a.prototype.queryArray=function(){var a,c,b,d,f;a=1<=arguments.length?h.call(arguments,0):[];b=[];c=this.queryModels.apply(this,a);d=0;for(f=c.length;d<f;d++)a=c[d],b.push(a.toJSON());return b};a.prototype.live=function(a){var c;null==a&&(a=this.options.live);if(this.options.live=a)this.on("change",this.onChange);else this.off("change",
this.onChange);c=this.getParentCollection();null!=c&&(a?(c.on("change",this.onParentChange),c.on("remove",this.onParentRemove),c.on("add",this.onParentAdd),c.on("reset",this.onParentReset)):(c.off("change",this.onParentChange),c.off("remove",this.onParentRemove),c.off("add",this.onParentAdd),c.off("reset",this.onParentReset)));return this};a.prototype.add=function(a,c){var b,d,m,k;c=c?f.clone(c):{};a=f.isArray(a)?a.slice():[a];d=[];m=0;for(k=a.length;m<k;m++)b=a[m],(b=this._prepareModel(b,c))&&this.test(b)&&
d.push(b);p.Collection.prototype.add.apply(this,[d,c]);return this};a.prototype.create=function(a,c){c=c?f.clone(c):{};(a=this._prepareModel(a,c))&&this.test(a)&&p.Collection.prototype.create.apply(this,[a,c]);return this};a.prototype.onChange=function(a){this.test(a)?this.comparator&&this.sortCollection():this.safeRemove(a);return this};a.prototype.onParentChange=function(a){this.test(a)&&this.getParentCollection().hasModel(a)?this.safeAdd(a):this.safeRemove(a);return this};a.prototype.onParentRemove=
function(a){this.safeRemove(a);return this};a.prototype.onParentAdd=function(a){this.safeAdd(a);return this};a.prototype.onParentReset=function(a){this.reset(this.getParentCollection().models);return this};return a}(p.Collection);q=function(){function b(){var a;a=1<=arguments.length?h.call(arguments,0):[];this.applyCriteriaOptions=t(this.applyCriteriaOptions,this);this.applyCriteriaOptions.apply(this,a);this}b.prototype.extractCriteriaOptions=function(){var a,g,c;a=1<=arguments.length?h.call(arguments,
0):[];1===a.length?g=a[0]instanceof b?a[0].options:a[0]?a[0]:null:1<a.length?(c=a[0],g=a[1],a=a[2],g={queries:{find:c||null},comparator:g,paging:a}):g=null;return g};b.prototype.applyCriteriaOptions=function(){var a,g;a=1<=arguments.length?h.call(arguments,0):[];null==this.options&&(this.options={});if(null==(g=this.options).filters)g.filters={};if(null==(g=this.options).queries)g.queries={};if(null==(g=this.options).pills)g.pills={};if(null==(g=this.options).paging)g.paging={};if(null==(g=this.options).searchString)g.searchString=
null;if(null==(g=this.options).comparator)g.comparator=null;if(a=this.extractCriteriaOptions.apply(this,a))null!=a.filters&&this.setFilters(a.filters),null!=a.queries&&this.setQueries(a.queries),null!=a.pills&&this.setPills(a.pills),null!=a.paging&&this.setPaging(a.paging),null!=a.searchString&&this.setSearchString(a.searchString),null!=a.comparator&&this.setComparator(a.comparator);return this};b.prototype.getPaging=function(){return this.options.paging};b.prototype.setPaging=function(a){a=f.extend(this.getPaging(),
a||{});a.page||(a.page=null);a.limit||(a.limit=null);a.offset||(a.offset=null);this.options.paging=a;return this};b.prototype.getComparator=function(){return this.options.comparator};b.prototype.setComparator=function(a){a=f.generateComparator(a);this.options.comparator=a;return this};b.prototype.getFilter=function(a){return this.options.filters[a]};b.prototype.getFilters=function(){return this.options.filters};b.prototype.setFilters=function(a){var g,c;a||(a={});for(g in a)l.call(a,g)&&(c=a[g],this.setFilter(g,
c));return this};b.prototype.setFilter=function(a,g){var c;if("undefined"===typeof g)throw Error("QueryCollection::setFilter was called without both arguments");c=this.options.filters;null!=g?c[a]=g:null!=c[a]&&delete c[a];return this};b.prototype.getQuery=function(a){return this.options.queries[a]};b.prototype.getQueries=function(){return this.options.queries};b.prototype.setQueries=function(a){var g,c;a||(a={});for(g in a)l.call(a,g)&&(c=a[g],this.setQuery(g,c));return this};b.prototype.setQuery=
function(a,g){var c;if("undefined"===typeof g)throw Error("QueryCollection::setQuery was called without both arguments");c=this.options.queries;null!=g?(g instanceof r||(g=new r(g)),c[a]=g):null!=c[a]&&delete c[a];return this};b.prototype.getPill=function(a){return this.options.pills[a]};b.prototype.getPills=function(){return this.options.pills};b.prototype.setPills=function(a){var g,c;a||(a={});for(g in a)l.call(a,g)&&(c=a[g],this.setPill(g,c));return this};b.prototype.setPill=function(a,g){var c,
b;if("undefined"===typeof g)throw Error("QueryCollection::setPill was called without both arguments");c=this.getPills();b=this.getSearchString();null!=g?(g instanceof s||(g=new s(g)),b&&g.setSearchString(b),c[a]=g):null!=c[a]&&delete c[a];return this};b.prototype.getCleanedSearchString=function(){return this.options.cleanedSearchString};b.prototype.getSearchString=function(){return this.options.searchString};b.prototype.setSearchString=function(a){var g,c,b,d;d=this.options.pills;g=a;for(b in d)l.call(d,
b)&&(c=d[b],g=c.setSearchString(g));this.options.searchString=a;this.options.cleanedSearchString=g;return this};b.prototype.test=function(){var a;a=1<=arguments.length?h.call(arguments,0):[];return this.testModel.apply(this,a)};b.prototype.testModel=function(a,b){return this.testQueries(a,null!=b?b.queries:void 0)&&this.testFilters(a,null!=b?b.filters:void 0)&&this.testPills(a,null!=b?b.pills:void 0)};b.prototype.testModels=function(a,b){var c,e,d,m,k,l,h;k=[];e=null!=(c=null!=b?b.paging:void 0)?
c:this.getPaging();c=null!=(null!=b?b.comparator:void 0)?f.generateComparator(null!=b?b.comparator:void 0):this.getComparator();l=0;for(h=a.length;l<h;l++)d=a[l],(m=this.testModel(d,b))&&k.push(d);c&&k.sort(c);e&&(c=e.offset||0,null!=e.limit&&0<e.limit?(c+=e.limit*((e.page||1)-1),e=c+e.limit,k=k.slice(c,e)):k=k.slice(c));return k};b.prototype.testQueries=function(a,b){var c,e;null==b&&(b=this.getQueries());for(e in b)if(l.call(b,e)&&(c=b[e],c instanceof r||(c=new r(c),b[e]=c),!1===c.test(a)))return!1;
return!0};b.prototype.testFilters=function(a,b){var c,e,d;c=this.getCleanedSearchString();null==b&&(b=this.getFilters());for(d in b)if(l.call(b,d)&&(e=b[d],!1===e(a,c)))return!1;return!0};b.prototype.testPills=function(a,b){var c,e,d;d=this.getSearchString();null==b&&(b=this.getPills());if(null!=d)for(e in b)if(l.call(b,e)&&(c=b[e],c instanceof s||(c=new s(query),c.setSearchString(d),b[e]=c),!1===c.test(a)))return!1;return!0};return b}();s=function(){function b(a){var b,c,e,d;a||(a={});this.callback=
a.callback;this.prefixes=a.prefixes;null!=a.logicalOperator&&(this.logicalOperator=a.logicalOperator);b=[];d=this.prefixes;c=0;for(e=d.length;c<e;c++)a=d[c],b.push(f.safeRegex(a));a=b.join("|");this.regex=f.createRegex("("+a+")\\s*('[^']+'|\\\"[^\\\"]+\\\"|[^'\\\"\\s]\\S*)");this}b.prototype.callback=null;b.prototype.regex=null;b.prototype.prefixes=null;b.prototype.searchString=null;b.prototype.values=null;b.prototype.logicalOperator="OR";b.prototype.setSearchString=function(a){var b,c,e,d;b=a;for(d=
[];c=this.regex.exec(a);){e=c[2].trim().replace(/(^['"]\s*|\s*['"]$)/g,"");switch(e){case "true":case "TRUE":e=!0;break;case "false":case "FALSE":e=!1;break;case "null":case "NULL":e=null}d.push(e);b=b.replace(c[0],"").trim()}this.searchString=a;this.values=d;return b};b.prototype.test=function(a){var b,c,e,d;if(null!=(b=this.values)&&b.length)if("OR"===this.logicalOperator){b=!1;d=this.values;c=0;for(e=d.length;c<e&&!(b=d[c],b=this.callback(a,b));c++);}else if("AND"===this.logicalOperator){b=!1;
d=this.values;c=0;for(e=d.length;c<e&&!(b=d[c],b=this.callback(a,b),!b);c++);}else throw Error("Unkown logical operator type");else b=null;return b};return b}();r=function(){function b(a){null==a&&(a={});this.source=a;this.compileQuery()}b.prototype.source=null;b.prototype.compiledSelectors=null;b.prototype.selectors={$or:{compile:function(a){var g,c,e,d;g=[];a=f.toArrayGroup(a.selectorValue);if(!a.length)throw Error("Query called with an empty "+selectorName+" statement");e=0;for(d=a.length;e<d;e++)c=
a[e],c=new b(c),g.push(c);return{queries:g}},test:function(a){var b,c,e,d;d=a.queries;c=0;for(e=d.length;c<e;c++)if(b=d[c],b.test(a.model))return!0;return!1}},$nor:{compile:function(a){return a.selector("$or",a)},test:function(a){return!a.selector("$or",a)}},$and:{compile:function(a){return a.selector("$or",a)},test:function(a){var b,c,e,d;d=a.queries;c=0;for(e=d.length;c<e;c++)if(b=d[c],!1===b.test(a.model))return!1;return!0}},$not:{compile:function(a){return a.selector("$and",a)},test:function(a){return!a.selector("$and",
a)}},string:{test:function(a){return a.modelValueExists&&a.modelValue===a.selectorValue}},number:{test:function(a){return a.selector("string",a)}},"boolean":{test:function(a){return a.selector("string",a)}},array:{test:function(a){return a.modelValueExists&&(new n(a.modelValue)).isSame(a.selectorValue)}},date:{test:function(a){return a.modelValueExists&&a.modelValue.toString()===a.selectorValue.toString()}},regexp:{test:function(a){return a.modelValueExists&&a.selectorValue.test(a.modelValue)}},"null":{test:function(a){return a.modelValue===
a.selectorValue}},$beginsWith:{test:function(a){var b,c,e,d;if(a.selectorValue&&a.modelValueExists&&f.isString(a.modelValue)){b=f.toArray(a.selectorValue);e=0;for(d=b.length;e<d;e++)if(c=b[e],a.modelValue.substr(0,c.length)===c)return!0}return!1}},$startsWith:{test:function(a){return a.selector("$beginsWith",a)}},$endsWith:{test:function(a){var b,c,e,d;if(a.selectorValue&&a.modelValueExists&&f.isString(a.modelValue)){b=f.toArray(a.selectorValue);e=0;for(d=b.length;e<d;e++)if(c=b[e],a.modelValue.substr(-1*
c.length)===c)return!0}return!1}},$finishesWith:{test:function(a){return a.selector("$endsWith",a)}},$all:{test:function(a){return null!=a.selectorValue&&a.modelValueExists&&(new n(a.modelValue)).hasAll(a.selectorValue)?!0:!1}},$in:{test:function(a){return null!=a.selectorValue&&a.modelValueExists&&((new n(a.modelValue)).hasIn(a.selectorValue)||(new n(a.selectorValue)).hasIn(a.modelValue))?!0:!1}},$nin:{test:function(a){return null!=a.selectorValue&&a.modelValueExists&&!1===(new n(a.modelValue)).hasIn(a.selectorValue)&&
!1===(new n(a.selectorValue)).hasIn(a.modelValue)?!0:!1}},$has:{test:function(a){return a.modelValueExists&&(new n(a.modelValue)).hasIn(a.selectorValue)?!0:!1}},$hasAll:{test:function(a){return a.modelValueExists&&(new n(a.modelValue)).hasIn(a.selectorValue)?!0:!1}},$size:{test:function(a){return null!=a.modelValue.length&&a.modelValue.length===a.selectorValue?!0:!1}},$length:{test:function(a){return a.selector("$size",a)}},$type:{test:function(a){return typeof a.modelValue===a.selectorValue?!0:!1}},
$like:{test:function(a){return f.isString(a.modelValue)&&-1!==a.modelValue.toLowerCase().indexOf(a.selectorValue.toLowerCase())?!0:!1}},$likeSensitive:{test:function(a){return f.isString(a.modelValue)&&-1!==a.modelValue.indexOf(a.selectorValue)?!0:!1}},$exists:{test:function(a){return a.selectorValue===a.modelValueExists?!0:!1}},$mod:{test:function(a){var b;return a.modelValueExists&&(b=a.selectorValue,f.isArray(b)||(b=[b]),1===b.length&&b.push(0),a.modelValue%b[0]===b[1])?!0:!1}},$eq:{test:function(a){return f.isEqual(a.modelValue,
a.selectorValue)?!0:!1}},$equal:{test:function(a){return a.selector("$eq",a)}},$ne:{test:function(a){return a.modelValue!==a.selectorValue?!0:!1}},$lt:{test:function(a){return null!=a.selectorValue&&f.isComparable(a.modelValue)&&a.modelValue<a.selectorValue?!0:!1}},$gt:{test:function(a){return null!=a.selectorValue&&f.isComparable(a.modelValue)&&a.modelValue>a.selectorValue?!0:!1}},$bt:{test:function(a){return null!=a.selectorValue&&f.isComparable(a.modelValue)&&a.selectorValue[0]<a.modelValue&&a.modelValue<
a.selectorValue[1]?!0:!1}},$lte:{test:function(a){return null!=a.selectorValue&&f.isComparable(a.modelValue)&&a.modelValue<=a.selectorValue?!0:!1}},$gte:{test:function(a){return null!=a.selectorValue&&f.isComparable(a.modelValue)&&a.modelValue>=a.selectorValue?!0:!1}},$bte:{test:function(a){return null!=a.selectorValue&&f.isComparable(a.modelValue)&&a.selectorValue[0]<=a.modelValue&&a.modelValue<=a.selectorValue[1]?!0:!1}}};b.prototype.compileSelector=function(a,b){var c,e,d,f,k,h;null==b&&(b={});
k=this.selectors;d={selectorName:a};f=k[a];if(!f)throw Error("Couldn't find the selector "+a);for(e in b)l.call(b,e)&&(h=b[e],d[e]=h);if(null!=f.compile)for(e in d.selector=function(a,b){return k[a].compile(b)},c=f.compile(d),c)l.call(c,e)&&(h=c[e],d[e]=h);d.selector=function(a,b){return k[a].test(b)};return{opts:d,test:f.test}};b.prototype.testCompiledSelector=function(a,b){var c,e;c=a.opts;e=a.test;c.model=b;c.modelValue=f.get(c.model,c.fieldName);c.modelId=f.get(c.model,"id");c.modelValueExists=
"undefined"!==typeof c.modelValue;c.modelValueExists||(c.modelValue=!1);return e(c)};b.prototype.compileQuery=function(){var a,b,c,e,d,h;c=[];h=this.source;for(e in h)if(l.call(h,e))if(d=h[e],"$or"===e||"$nor"===e||"$and"===e||"$not"===e)b=this.compileSelector(e,{fieldName:e,selectorValue:d}),c.push(b);else if(f.isString(d))b=this.compileSelector("string",{fieldName:e,selectorValue:d}),c.push(b);else if(f.isNumber(d))b=this.compileSelector("number",{fieldName:e,selectorValue:d}),c.push(b);else if(f.isBoolean(d))b=
this.compileSelector("boolean",{fieldName:e,selectorValue:d}),c.push(b);else if(f.isArray(d))b=this.compileSelector("array",{fieldName:e,selectorValue:d}),c.push(b);else if(f.isDate(d))b=this.compileSelector("date",{fieldName:e,selectorValue:d}),c.push(b);else if(f.isRegExp(d))b=this.compileSelector("regexp",{fieldName:e,selectorValue:d}),c.push(b);else if(f.isNull(d))b=this.compileSelector("null",{fieldName:e,selectorValue:d}),c.push(b);else if(f.isObject(d))for(a in d)l.call(d,a)&&(b=d[a],b=this.compileSelector(a,
{fieldName:e,selectorValue:b}),c.push(b));this.compiledSelectors=c;return this};b.prototype.test=function(a){var b,c,e,d;b=!0;d=this.compiledSelectors;c=0;for(e=d.length;c<e&&!(b=d[c],b=this.testCompiledSelector(b,a),!1===b);c++);return b};return b}();u={safeRegex:f.safeRegex,createRegex:f.createRegex,createSafeRegex:f.createSafeRegex,generateComparator:f.generateComparator,toArray:f.toArray,util:f,Backbone:p,Hash:n,QueryCollection:v,Criteria:q,Query:r,Pill:s,setQuerySelector:function(b,a){null!=
a?r.prototype.selectors[b]=a:delete r.prototype.selectors[b];return this},testModels:function(){var b,a;a=arguments[0];b=2<=arguments.length?h.call(arguments,1):[];a=f.toArray(a);return function(a,b,e){e.prototype=a.prototype;e=new e;a=a.apply(e,b);return Object(a)===a?a:e}(q,b,function(){}).testModels(a)},createCollection:function(b,a){b=f.toArray(b);return new v(b,a)},createLiveCollection:function(b,a){b=f.toArray(b);return(new v(b,a)).live(!0)}};"undefined"!==typeof module&&null!==module?module.exports=
u:this.queryEngine=u}).call(this);
