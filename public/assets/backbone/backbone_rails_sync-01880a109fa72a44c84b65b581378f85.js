(function(e){var l={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};Backbone.sync=function(c,b,d){var a=_.extend({type:l[c],dataType:"json",beforeSend:function(a){if(!d.noCSRF){var c=e('meta[name="csrf-token"]').attr("content");c&&a.setRequestHeader("X-CSRF-Token",c)}b.trigger("sync:start")}},d);if(!a.url){var f;if(!(f=!b||!b.url?null:_.isFunction(b.url)?b.url():b.url))throw Error("A 'url' property or function must be specified");a.url=f}if(!a.data&&b&&("create"==c||"update"==c))a.contentType=
"application/json",c={},b.paramRoot?c[b.paramRoot]=b.toJSON():c=b.toJSON(),a.data=JSON.stringify(c);"GET"!==a.type&&(a.processData=!1);var g=d.complete;a.complete=function(a,c){b.trigger("sync:end");g&&g(a,c)};var h=d.success;a.success=function(a){h&&h(b,a,d);b.trigger("sync",b,a,d)};var k=d.error;a.error=function(a){k&&k(b,a,d);b.trigger("error",b,a,d)};return e.ajax(a)}})(jQuery);
