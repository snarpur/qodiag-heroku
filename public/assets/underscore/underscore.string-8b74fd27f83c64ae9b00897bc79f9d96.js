(function(m){if("undefined"!=typeof _)var r=_().reverse,s=_.include;var t=String.prototype.trim,n=function(a,b){for(var c=[];0<b;c[--b]=a);return c.join("")},d=function(a){return function(){for(var b=Array.prototype.slice.call(arguments),c=0;c<b.length;c++)b[c]=null==b[c]?"":""+b[c];return a.apply(null,b)}},p=function(){function a(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}var b=function(){b.cache.hasOwnProperty(arguments[0])||(b.cache[arguments[0]]=b.parse(arguments[0]));
return b.format.call(null,b.cache[arguments[0]],arguments)};b.format=function(b,q){var d=1,e=b.length,f="",l=[],h,k,g,m;for(h=0;h<e;h++)if(f=a(b[h]),"string"===f)l.push(b[h]);else if("array"===f){g=b[h];if(g[2]){f=q[d];for(k=0;k<g[2].length;k++){if(!f.hasOwnProperty(g[2][k]))throw p('[_.sprintf] property "%s" does not exist',g[2][k]);f=f[g[2][k]]}}else f=g[1]?q[g[1]]:q[d++];if(/[^s]/.test(g[8])&&"number"!=a(f))throw p("[_.sprintf] expecting number but found %s",a(f));switch(g[8]){case "b":f=f.toString(2);
break;case "c":f=String.fromCharCode(f);break;case "d":f=parseInt(f,10);break;case "e":f=g[7]?f.toExponential(g[7]):f.toExponential();break;case "f":f=g[7]?parseFloat(f).toFixed(g[7]):parseFloat(f);break;case "o":f=f.toString(8);break;case "s":f=(f=String(f))&&g[7]?f.substring(0,g[7]):f;break;case "u":f=Math.abs(f);break;case "x":f=f.toString(16);break;case "X":f=f.toString(16).toUpperCase()}f=/[def]/.test(g[8])&&g[3]&&0<=f?"+"+f:f;k=g[4]?"0"==g[4]?"0":g[4].charAt(1):" ";m=g[6]-String(f).length;k=
g[6]?n(k,m):"";l.push(g[5]?f+k:k+f)}return l.join("")};b.cache={};b.parse=function(a){for(var b=[],d=[],e=0;a;){if(null!==(b=/^[^\x25]+/.exec(a)))d.push(b[0]);else if(null!==(b=/^\x25{2}/.exec(a)))d.push("%");else if(null!==(b=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(a))){if(b[2]){var e=e|1,f=[],l=b[2],h=[];if(null!==(h=/^([a-z_][a-z_\d]*)/i.exec(l)))for(f.push(h[1]);""!==(l=l.substring(h[0].length));)if(null!==(h=/^\.([a-z_][a-z_\d]*)/i.exec(l)))f.push(h[1]);
else if(null!==(h=/^\[(\d+)\]/.exec(l)))f.push(h[1]);else throw"[_.sprintf] huh?";else throw"[_.sprintf] huh?";b[2]=f}else e|=2;if(3===e)throw"[_.sprintf] mixing positional and named placeholders is not (yet) supported";d.push(b)}else throw"[_.sprintf] huh?";a=a.substring(b[0].length)}return d};return b}(),e={isBlank:d(function(a){return/^\s*$/.test(a)}),stripTags:d(function(a){return a.replace(/<\/?[^>]+>/ig,"")}),capitalize:d(function(a){return a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()}),
chop:d(function(a,b){b=1*b||0||a.length;for(var c=[],d=0;d<a.length;)c.push(a.slice(d,d+b)),d+=b;return c}),clean:d(function(a){return e.strip(a.replace(/\s+/g," "))}),count:d(function(a,b){for(var c=0,d,e=0;e<a.length;)d=a.indexOf(b,e),0<=d&&c++,e=e+(0<=d?d:0)+b.length;return c}),chars:d(function(a){return a.split("")}),escapeHTML:d(function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}),unescapeHTML:d(function(a){return a.replace(/&lt;/g,
"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&amp;/g,"&")}),escapeRegExp:d(function(a){return a.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")}),insert:d(function(a,b,c){a=a.split("");a.splice(1*b||0,0,c);return a.join("")}),includes:d(function(a,b){return-1!==a.indexOf(b)}),include:function(a,b){return!s||/string|number/.test(typeof a)?this.includes(a,b):s(a,b)},join:d(function(a){var b=Array.prototype.slice.call(arguments);return b.join(b.shift())}),lines:d(function(a){return a.split("\n")}),
reverse:function(a){return!r||/string|number/.test(typeof a)?Array.prototype.reverse.apply(String(a).split("")).join(""):r.call(_(a))},splice:d(function(a,b,c,d){a=a.split("");a.splice(1*b||0,1*c||0,d);return a.join("")}),startsWith:d(function(a,b){return a.length>=b.length&&a.substring(0,b.length)===b}),endsWith:d(function(a,b){return a.length>=b.length&&a.substring(a.length-b.length)===b}),succ:d(function(a){var b=a.split("");b.splice(a.length-1,1,String.fromCharCode(a.charCodeAt(a.length-1)+1));
return b.join("")}),titleize:d(function(a){a=a.split(" ");for(var b,c=0;c<a.length;c++)b=a[c].split(""),"undefined"!==typeof b[0]&&(b[0]=b[0].toUpperCase()),c+1===a.length?a[c]=b.join(""):a[c]=b.join("")+" ";return a.join("")}),camelize:d(function(a){return e.trim(a).replace(/(\-|_|\s)+(.)?/g,function(a,c,d){return d?d.toUpperCase():""})}),underscored:function(a){return e.trim(a).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/\-|\s+/g,"_").toLowerCase()},dasherize:function(a){return e.trim(a).replace(/([a-z\d])([A-Z]+)/g,
"$1-$2").replace(/^([A-Z]+)/,"-$1").replace(/\_|\s+/g,"-").toLowerCase()},trim:d(function(a,b){if(!b&&t)return t.call(a);b=b?e.escapeRegExp(b):"\\s";return a.replace(RegExp("^["+b+"]+|["+b+"]+$","g"),"")}),ltrim:d(function(a,b){b=b?e.escapeRegExp(b):"\\s";return a.replace(RegExp("^["+b+"]+","g"),"")}),rtrim:d(function(a,b){b=b?e.escapeRegExp(b):"\\s";return a.replace(RegExp("["+b+"]+$","g"),"")}),truncate:d(function(a,b,c){b=1*b||0;return a.length>b?a.slice(0,b)+(c||"..."):a}),words:function(a,b){return String(a).split(b||
" ")},pad:d(function(a,b,c,d){var e="",e=0;b=1*b||0;c?1<c.length&&(c=c.charAt(0)):c=" ";switch(d){case "right":e=b-a.length;e=n(c,e);a+=e;break;case "both":e=b-a.length;e={left:n(c,Math.ceil(e/2)),right:n(c,Math.floor(e/2))};a=e.left+a+e.right;break;default:e=b-a.length,e=n(c,e),a=e+a}return a}),lpad:function(a,b,c){return e.pad(a,b,c)},rpad:function(a,b,c){return e.pad(a,b,c,"right")},lrpad:function(a,b,c){return e.pad(a,b,c,"both")},sprintf:p,vsprintf:function(a,b){b.unshift(a);return p.apply(null,
b)},toNumber:function(a,b){var c;c=1*(1*a||0).toFixed(1*b||0)||0;return!(0===c&&"0"!==a&&0!==a)?c:Number.NaN},strRight:d(function(a,b){var c=!b?-1:a.indexOf(b);return-1!=c?a.slice(c+b.length,a.length):a}),strRightBack:d(function(a,b){var c=!b?-1:a.lastIndexOf(b);return-1!=c?a.slice(c+b.length,a.length):a}),strLeft:d(function(a,b){var c=!b?-1:a.indexOf(b);return-1!=c?a.slice(0,c):a}),strLeftBack:d(function(a,b){var c=a.lastIndexOf(b);return-1!=c?a.slice(0,c):a})};e.strip=e.trim;e.lstrip=e.ltrim;e.rstrip=
e.rtrim;e.center=e.lrpad;e.ljust=e.lpad;e.rjust=e.rpad;"undefined"!==typeof module&&module.exports?module.exports=e:"undefined"!==typeof m._?m._.mixin(e):m._=e})(this||window);
