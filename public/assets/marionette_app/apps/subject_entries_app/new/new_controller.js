(function(){var g={}.hasOwnProperty,h=function(c,b){function f(){this.constructor=c}for(var e in b)g.call(b,e)&&(c[e]=b[e]);f.prototype=b.prototype;c.prototype=new f;c.__super__=b.prototype;return c};this.Qapp.module("SubjectEntriesApp.New",function(c,b,f,e,g,k){return c.Controller=function(e){function d(){return d.__super__.constructor.apply(this,arguments)}h(d,e);d.prototype.initialize=function(a){return this.region=a.region,this.entry=a.entry,a};d.prototype.newEntry=function(){var a;a=this.showForm();
return this.listenTo(a,"form:cancel",function(a){return function(){a.region.trigger("form:close");return a.region.close()}}(this))};d.prototype.showForm=function(){var a;a=this.getFormView();a=b.request("form:wrapper",a,{collection:a.collection});this.region.show(a);return a};d.prototype.createModel=function(){var a;a={entry_field_id:this.entry.get("id"),entry_set_response_id:this.entry.get("entry_set_response_id"),person_id:b.request("get:current:user").get("person_id"),text_value:""};a=new b.Entities.EntryValue(a);
this.listenTo(a,"sync:stop",function(a){this.region.close();return this.region.trigger("form:close")});return a};d.prototype.getFormView=function(){return new c.Entry({model:this.createModel(),collection:this.entry.get("caretaker_entry_values")})};return d}(b.Controllers.Base)})}).call(this);
