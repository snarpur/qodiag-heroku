(function(){var h={}.hasOwnProperty,k=function(b,c){function f(){this.constructor=b}for(var d in c)h.call(c,d)&&(b[d]=c[d]);f.prototype=c.prototype;b.prototype=new f;b.__super__=c.prototype;return b};this.Qapp.module("EntrySetSectionsApp.EditCreate",function(b,c,f,d,h,l){return b.Controller=function(d){function e(){return e.__super__.constructor.apply(this,arguments)}k(e,d);e.prototype.create=function(a){a.action="create";return this.showDialog(a)};e.prototype.edit=function(a){a.action="edit";return this.showDialog(a)};
e.prototype.showDialog=function(a){this.dialogView=new b.Section({model:a.section});c.dialogRegion.show(this.dialogView);return this.dialogView.on("save:section",function(c){return function(){return c.saveSection(a)}}(this))};e.prototype.saveSection=function(a){var b,e,d,f,g;f=a.section;d=a.collection;e=a.activeView;b=a.action;g=this;return f.save(f.attributes,{success:function(a,f){"create"===b?(d.add(f),d.trigger("change:current:section",{model:d.last()}),c.navigate(g.successPath(a))):"edit"===
b&&a.trigger("edit:complete");g.dialogView.$el.find(".modal").modal("hide");return e.trigger("section:"+b+":complete")},error:function(){throw"entry_set_sections/create/create_controller.js.coffee:new()";}})};e.prototype.successPath=function(a){return"settings"+Routes.entry_set_section_path(a.get("entry_set_id"),a.id)};return e}(c.Controllers.Base)})}).call(this);
