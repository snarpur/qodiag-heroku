(function(){var h=function(b,c){return function(){return b.apply(c,arguments)}},g={}.hasOwnProperty,k=function(b,c){function f(){this.constructor=b}for(var e in c)g.call(c,e)&&(b[e]=c[e]);f.prototype=c.prototype;b.prototype=new f;b.__super__=c.prototype;return b};this.Qapp.module("EntrySetsApp.List",function(b,c,f,e,g,l){return b.Controller=function(e){function d(){this.getLayout=h(this.getLayout,this);return d.__super__.constructor.apply(this,arguments)}k(d,e);d.prototype.listEntrySets=function(a){this.executeSettingsNavigation();
c.contentRegion.show(this.getLayout());this.entrySets=c.request("entry:sets:entities");a=this.getEntrySetsView();return this.showEntrySets(a)};d.prototype.showEntrySets=function(a){this.show(a,{region:this.getLayout().listRegion,loading:!0});this.listenTo(a,"new:entry:set",function(b){return function(){return c.execute("create:entry:set",{activeView:a})}}(this));return this.listenTo(a,"entry:set:created",function(a){return function(b){return c.navigate(a.newEntrySetPath(b),{trigger:!0})}}(this))};
d.prototype.getEntrySetsView=function(){var a;a=new b.EntrySets({collection:this.entrySets});this.listenTo(a,"childview:delete:entry:set",function(a){return function(b){return a.confirmDelete(b)}}(this));return a};d.prototype.executeSettingsNavigation=function(){return c.execute("show:settings:navigation",{iconClass:"fa fa-list-ul",i18n:"entry_set.model_name_plural"})};d.prototype.deleteFromEntrySetSections=function(a){return bootbox.confirm(I18n.t("activerecord.confirm.messages.deleted",{model:a.model.get("name")}),
function(b){if(b)return a.model.destroy(),window.location.href="/#settings/entry_sets"})};d.prototype.confirmDelete=function(a){return bootbox.confirm(I18n.t("activerecord.confirm.messages.deleted",{model:a.model.get("name")}),function(b){if(b)return a.model.destroy()})};d.prototype.getLayout=function(){return null!=this.layout?this.layout:this.layout=new b.Layout};d.prototype.newEntrySetPath=function(a){return"settings"+Routes.entry_set_sections_path(a.get("id"))};return d}(c.Controllers.Base)})}).call(this);
