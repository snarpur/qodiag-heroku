(function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key)){child[key]=parent[key]}}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child};this.Qapp.module("EntrySetsApp.List",function(List,App,Backbone,Marionette,$,_){var _ref;return List.Controller=(function(_super){__extends(Controller,_super);function Controller(){this.getLayout=__bind(this.getLayout,this);_ref=Controller.__super__.constructor.apply(this,arguments);return _ref}Controller.prototype.listEntrySets=function(options){var entrySetsView;App.contentRegion.show(this.getLayout());this.entrySets=App.request("entry:sets:entities");entrySetsView=this.getEntrySetsView();this.showEntrySets(entrySetsView);return this.executeSettingsNavigation()};Controller.prototype.showEntrySets=function(entrySetsView){var _this=this;this.show(entrySetsView,{region:this.getLayout().listRegion,loading:true});this.listenTo(entrySetsView,"new:entry:set",function(){return App.execute("create:entry:set",{activeView:entrySetsView})});return this.listenTo(entrySetsView,"entry:set:created",function(newEntrySet){return App.navigate(_this.newEntrySetPath(newEntrySet),{trigger:true})})};Controller.prototype.getEntrySetsView=function(){var view,_this=this;view=new List.EntrySets({collection:this.entrySets});this.listenTo(view,"childview:delete:entry:set",function(view){return _this.confirmDelete(view)});return view};Controller.prototype.executeSettingsNavigation=function(){return App.execute("show:settings:navigation",{currentSetting:"entry_sets",region:this.getLayout().settingsNavigationRegion})};Controller.prototype.deleteFromEntrySetSections=function(options){return bootbox.confirm("Ertu viss um að þú viljir eyða eyðublaði "+(options.model.get("name")),function(result){if(result){options.model.destroy();return window.location.href="/#settings/entry_sets"}})};Controller.prototype.confirmDelete=function(view){return bootbox.confirm("Ertu viss um að þú viljir eyða eyðublaði "+(view.model.get("name")),function(result){if(result){return view.model.destroy()}})};Controller.prototype.getLayout=function(){var _ref1;return(_ref1=this.layout)!=null?_ref1:this.layout=new List.Layout};Controller.prototype.newEntrySetPath=function(entrySet){return"settings"+(Routes.entry_set_sections_path(entrySet.get("id")))};return Controller})(App.Controllers.Base)})}).call(this);