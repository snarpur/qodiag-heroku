(function(){var h={}.hasOwnProperty,e=function(b,c){function e(){this.constructor=b}for(var g in c)h.call(c,g)&&(b[g]=c[g]);e.prototype=c.prototype;b.prototype=new e;b.__super__=c.prototype;return b};this.Qapp.module("TimelineApp.List",function(b,c,h,g,k,f){b.Layout=function(b){function a(){return a.__super__.constructor.apply(this,arguments)}e(a,b);a.prototype.template="timeline/list/templates/list_layout";a.prototype.regions={timelineRegion:"#timeline-region",menuRegion:"#menu-region"};a.prototype.triggers=
{"click .add-survey":"add:survey:clicked"};return a}(c.Views.Layout);b.Select=function(b){function a(){return a.__super__.constructor.apply(this,arguments)}e(a,b);a.prototype.template="timeline/list/templates/menu";a.prototype.ui=function(){return{select:"#menu"}};a.prototype.events={"change #menu":"triggerSelect"};a.prototype.triggerSelect=function(a){return this.trigger("select:menu:changed",a)};a.prototype.onShow=function(){this.ui.select.val(f.extend(this.options.initialSurveys,{placeholder:"TRANSLATE ME"}));
this.ui.select.select2({multiple:!0,initSelection:function(a){return function(b,c){var d;d=[];f.each(b.val().split(","),function(b){var c;c=a.collection.findWhere({id:Number(b)});return d.push({id:Number(b),text:c.get("text")})});return c(d)}}(this),query:function(a){return function(b){var c;c={results:a.collection.toJSON()};return b.callback(c)}}(this)});return this.listenTo(this.options.items,"add",function(a){return function(b,c){var d;d=a.ui.select.select2("val");if(-1===f.indexOf(d,b.get("survey_id")))return d.push(b.get("survey_id")),
a.ui.select.select2("val",d)}}(this))};return a}(c.Views.ItemView);return b.Timeline=function(b){function a(){return a.__super__.constructor.apply(this,arguments)}e(a,b);a.prototype.template="timeline/list/templates/timeline";a.prototype.id="timeline-visualization";a.prototype.timelineOptions={align:"center",orientation:"top",height:400,showCurrentTime:!1,autoResize:!0,zoomMax:31536E6,zoomMin:31536E6};a.prototype.onShow=function(){this.setTimeline();this.setOptions();this.setItems();return this.listenTo(this.timeline,
"select",function(a){return function(b){b=a.model.get("items").get(f.first(b.items));if(!f.isEmpty(b))return a.trigger("item:selected",{item:b})}}(this))};a.prototype.start=function(){return moment(new Date).subtract("months",6)};a.prototype.end=function(){return moment(new Date).add("months",6)};a.prototype.startEnd=function(){return{start:this.start(),end:this.end()}};a.prototype.setTimeline=function(){this.timeline=new vis.Timeline(this.el,[],{});return this.model.set("timeline",this.timeline)};
a.prototype.setItems=function(){return this.timeline.setItems(this.model.get("visItems"))};a.prototype.setOptions=function(){var a;a=f.extend(this.timelineOptions,this.startEnd());return this.timeline.setOptions(a)};return a}(c.Views.ItemView)})}).call(this);
