(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key)){child[key]=parent[key]}}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child};this.Qapp.module("ProfilesApp.EditCreate",function(EditCreate,App,Backbone,Marionette,$,_){var _ref;return EditCreate.Controller=(function(_super){__extends(Controller,_super);function Controller(){_ref=Controller.__super__.constructor.apply(this,arguments);return _ref}Controller.prototype.initialize=function(options){return this.activeView=options.activeView,this.collection=options.collection,this.model=options.model,this.subjectId=options.subjectId,options};Controller.prototype.showGuardian=function(guardian){var dialogView,formView,_this=this;if(this.activeView.template.indexOf("guardian")!==-1){dialogView=new EditCreate.Guardian({model:this.model})}else{dialogView=new EditCreate.Subject({model:this.model})}formView=App.request("form:wrapper",dialogView,this.buttonsConfig());App.dialogRegion.show(formView);return this.listenTo(formView.model,"created updated",function(){return _this.activeView.render()})};Controller.prototype.buttonsConfig=function(){var options;options={modal:true,title:this.model.isNew()?"Skrá upplýsingar":"Breyta upplýsingum",formClass:"form-horizontal"};return options};Controller.prototype.edit=function(){return this.showGuardian(this.model)};Controller.prototype.create=function(){var relationships;relationships=[{name:"parent",relation_id:this.subjectId}];this.model.set("relationships",relationships);return this.showGuardian(this.model)};Controller.prototype.getFormWrapperRegion=function(){return this.getLayout().formWrapperRegion};Controller.prototype.getLayout=function(){var _ref1;return(_ref1=this.layout)!=null?_ref1:this.layout=new EditCreate.Layout};return Controller})(App.Controllers.Base)})}).call(this);