(function(){var f={}.hasOwnProperty,g=function(b,c){function e(){this.constructor=b}for(var d in c)f.call(c,d)&&(b[d]=c[d]);e.prototype=c.prototype;b.prototype=new e;b.__super__=c.prototype;return b};this.Qapp.module("Entities",function(b,c,e,d,f,h){b.Section=function(b){function a(){return a.__super__.constructor.apply(this,arguments)}g(a,b);a.prototype.initialize=function(){this.url=function(){return this.isNew()?Routes.sections_path():Routes.section_path(this.get("id"))};return a.__super__.initialize.apply(this,
arguments)};a.prototype.isCurrentSection=function(){return this.collection.isCurrentSection(this)};a.prototype.getSectionEntryResponses=function(a){var b;b=new c.Entities.EntryFields([],{});b.url=Routes.entry_set_response_section_path(a,this.id);b.fetch({reset:!0});return b};return a}(b.Model);b.Sections=function(c){function a(){return a.__super__.constructor.apply(this,arguments)}g(a,c);a.prototype.model=b.Section;a.prototype.url=function(){return Routes.sections_path()};a.prototype.initialize=function(b,
c){a.__super__.initialize.apply(this,arguments);return this.on("change:current:section",function(a){this.currentSectionId=a.model.id;return this.currentSection=a.model})};a.prototype.isCurrentSection=function(a){return a.id===this.getCurrentSection().id};a.prototype.getCurrentSection=function(){return this.currentSectionId?this.get(this.currentSectionId):this.first()};a.prototype.setCurrentToLast=function(){return this.sectionNo=this.last().get("display_order")};a.prototype.isCurrentLast=function(){return this.currentDisplayNo()===
this.size()};a.prototype.isCurrentFirst=function(){return 1===this.currentDisplayNo()};a.prototype.currentDisplayNo=function(){return this.getCurrentSection().get("display_order")};a.prototype.getNextSection=function(){return this.findWhere({display_order:this.currentDisplayNo()+1})};a.prototype.getPreviousSection=function(){return this.findWhere({display_order:this.currentDisplayNo()-1})};return a}(b.Collection);return c.reqres.setHandler("entities:section",function(b){return API.getSection(b)})})}).call(this);
