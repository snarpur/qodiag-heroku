(function(){var k=function(b,c){return function(){return b.apply(c,arguments)}},g={}.hasOwnProperty,h=function(b,c){function f(){this.constructor=b}for(var e in c)g.call(c,e)&&(b[e]=c[e]);f.prototype=c.prototype;b.prototype=new f;b.__super__=c.prototype;return b};this.Qapp.module("Entities",function(b,c,f,e,g,l){b.SectionsEntryFields=function(b){function a(){this.updateDisplayOrder=k(this.updateDisplayOrder,this);return a.__super__.constructor.apply(this,arguments)}h(a,b);a.prototype.blacklist=["index"];
a.prototype.initialize=function(){this.url=function(){return Routes.section_sections_entry_fields_path(this.id)};return a.__super__.initialize.apply(this,arguments)};a.prototype.updateDisplayOrder=function(a){var b;a+=1;b=0<a-this.get("display_order")?0.5:-0.5;return this.set("display_order",a+b)};a.prototype.destroy=function(){this.url="section_entry_fields/"+this.id;return a.__super__.destroy.apply(this,arguments)};return a}(b.Model);b.SectionsEntryFieldsCollection=function(c){function a(){return a.__super__.constructor.apply(this,
arguments)}h(a,c);a.prototype.model=b.SectionsEntryFields;a.prototype.initialize=function(b,c){this.section=c.section;this.on("add remove",function(a){return function(b,c,d){return a.section.trigger(""+(d.add?"add":"remove")+":fields",{model:b})}}(this));this.url=function(){if(this.section)return Routes.section_sections_entry_fields_path(this.section.id)};return a.__super__.initialize.apply(this,arguments)};a.prototype.comparator=function(a){return a.get("display_order")};a.prototype.setDisplayOrder=
function(){this.sort();this.each(function(a,b){return a.set("display_order",b+1)});return this.trigger("reset")};a.prototype.removeField=function(a){var b;b=this;if(a.id)return a.destroy({success:function(){return b.setDisplayOrder()},error:function(){throw I18n.t("marionette.errors.error_in_function",{"function":" - entities/sections_entry_fields.js.coffee:removeFromSection()"});}});this.remove(a);return this.setDisplayOrder()};return a}(b.Collection);return{getEntryFieldEntities:function(c){var a,
d;d=new b.EntryFields([],l.omit(c,"callback"));a=c.callback;return d.fetch({reset:!0,success:function(){return a(d)}})}}})}).call(this);
