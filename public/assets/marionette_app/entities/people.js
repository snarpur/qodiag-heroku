(function(){var f={}.hasOwnProperty,g=function(c,b){function d(){this.constructor=c}for(var e in b)f.call(b,e)&&(c[e]=b[e]);d.prototype=b.prototype;c.prototype=new d;c.__super__=b.prototype;return c};this.Qapp.module("Entities",function(c,b,d,e,f,l){var h;c.Person=function(k){function a(){return a.__super__.constructor.apply(this,arguments)}g(a,k);a.prototype.urlRoot=Routes.people_path();a.prototype.paramRoot="person";a.prototype.relations=[{type:d.One,key:"address",relatedModel:function(){return b.Entities.Address}},
{type:d.One,key:"user",relatedModel:function(){return b.Entities.User}},{type:d.Many,key:"inverse_relationships",relatedModel:function(){return b.Entities.Relationship}}];a.prototype.nestedAttributeList=["relationships"];a.prototype.defaults={image_url_tiny:"/assets/avatars/tiny/male.png",image_url_thumb:"/assets/avatars/thumb/male.png",image_url_small:"/assets/avatars/small/male.png",image_url_medium:"/assets/avatars/medium/male.png",image_url_large:"/assets/avatars/large/male.png"};a.prototype.validation=
{firstname:{required:!0,msg:function(){return I18n.t("activerecord.errors.messages.blank")}},lastname:{required:!0,msg:function(){return I18n.t("activerecord.errors.messages.blank")}},full_cpr:{required:!0,msg:function(){return I18n.t("activerecord.errors.messages.blank")}},sex:{required:!0,msg:function(){return I18n.t("activerecord.errors.messages.blank")}}};a.prototype.initialize=function(){this.blacklist=l.keys(this.defaults);this.on("change:respondents",this.setRespondents);return a.__super__.initialize.apply(this,
arguments)};a.prototype.setRespondents=function(a,b,k){if(!(b instanceof d.Collection))return this.set("respondents",new c.People(b),{silent:!0})};a.prototype.getParents=function(){var a;a=new c.People([]);a.url=""+Routes.inverse_relation_path(this.id)+"?relationship_name=parents";a.fetch();return a};return a}(c.Model);c.People=function(b){function a(){return a.__super__.constructor.apply(this,arguments)}g(a,b);a.prototype.model=c.Person;a.prototype.url=function(){return Routes.people_path()};return a}(c.Collection);
h={getPerson:function(b){b=new c.Person({id:b});b.fetch();return b}};return b.reqres.setHandler("get:person:entity",function(b){return h.getPerson(b)})})}).call(this);
