(function(){var h={}.hasOwnProperty,k=function(a,c){function f(){this.constructor=a}for(var e in c)h.call(c,e)&&(a[e]=c[e]);f.prototype=c.prototype;a.prototype=new f;a.__super__=c.prototype;return a};this.Qapp.module("Entities",function(a,c,f,e,h,l){var g;a.User=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}k(b,a);b.prototype.subjectIds=function(){return l.map(this.get("subjects"),function(a){return a.id})};return b}(a.Model);a.UsersCollection=function(d){function b(){return b.__super__.constructor.apply(this,
arguments)}k(b,d);b.prototype.model=a.User;b.prototype.url=function(){return Routes.users_path()};return b}(a.Collection);g={setCurrentUser:function(d){return new a.User(d)},getUserEntities:function(d){var b;b=new a.UsersCollection;return b.fetch({reset:!0,success:function(){return d(b)}})}};c.reqres.setHandler("set:current:user",function(a){return g.setCurrentUser(a)});return c.reqres.setHandler("user:entities",function(a){return g.getUserEntities(a)})})}).call(this);
