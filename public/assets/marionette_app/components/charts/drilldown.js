(function(){var e=function(b,d){return function(){return b.apply(d,arguments)}},h={}.hasOwnProperty,l=function(b,d){function e(){this.constructor=b}for(var f in d)h.call(d,f)&&(b[f]=d[f]);e.prototype=d.prototype;b.prototype=new e;b.__super__=d.prototype;return b};this.Qapp.module("Components.Charts",function(b,d,h,f,k,g){return b.Drilldown=function(b){function c(){this.addChartToHistory=e(this.addChartToHistory,this);this.addQuestionListToHistory=e(this.addQuestionListToHistory,this);this.mergeParamsFromRoot=
e(this.mergeParamsFromRoot,this);this.getQuestionList=e(this.getQuestionList,this);this.drilldown=e(this.drilldown,this);this.drillup=e(this.drillup,this);return c.__super__.constructor.apply(this,arguments)}l(c,b);c.prototype.initialize=function(){this.chart=this.get("chart");this.set("paramsHistory",[this.chart.attributes]);this.chart.get("plotOptions").column.cursor="pointer";return this.chart.get("plotOptions").column.point.events.click=this.drilldown};c.prototype.drillup=function(){var a;a=g.initial(this.get("paramsHistory"));
return this.set("paramsHistory",a)};c.prototype.getCurrentChartParams=function(){return g.last(this.get("paramsHistory"))};c.prototype.drilldown=function(a){a=a.currentTarget;if(a.drilldown)return this.set({previousChart:a.series.chart}),a=k.extend(!0,{},a.drilldown),this.addChartToHistory(a);if(this.isQuestionList(a.category))return this.getQuestionList(a.category)};c.prototype.getQuestionList=function(a){return console.log("getQuestionList:(questionGroupName)=>")};c.prototype.mergeParamsFromRoot=
function(a){g.each("chart credits legend subtitle title tooltip yAxis xAxis plotOptions".split(" "),function(c){var b;b=a[c];null==b&&(b={});return a[c]=k.extend({},this.chart.get(c),b)},this);a.chart.width=d.Timeline.Dimensions.history_view_width;return a};c.prototype.isQuestionList=function(a){return g.contains(this.chart.get("questionListDrilldown"),a)};c.prototype.addQuestionListToHistory=function(a){var b;b=this.get("paramsHistory");b.push(a);this.set("paramsHistory",b);return this.trigger("change:paramsHistory")};
c.prototype.addChartToHistory=function(a){var b;a=this.mergeParamsFromRoot(a);b=this.get("paramsHistory");b.push(a);this.set("paramsHistory",b);return this.trigger("change:paramsHistory")};return c}(h.Model)})}).call(this);
