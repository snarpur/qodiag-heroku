(function(){var k={}.hasOwnProperty,l=function(c,b){function f(){this.constructor=c}for(var d in b)k.call(b,d)&&(c[d]=b[d]);f.prototype=b.prototype;c.prototype=new f;c.__super__=b.prototype;return c};this.Qapp.module("Components.Loading",function(c,b,f,d,g,h){c.LoadingController=function(d){function a(){return a.__super__.constructor.apply(this,arguments)}l(a,d);a.prototype.initialize=function(e){var a,c,b;b=e.view;a=e.config;a=h.isBoolean(a)?{}:a;h.defaults(a,{loadingType:"opacity-spinner",debug:!1,
entities:this.getEntities(b)});e=e.loaderRegion?e.loaderRegion:this.region;switch(a.loadingType){case "opacity-spinner":g(e.el).toggleWrapper({spinner:!0});break;case "opacity":g(e.el).css("opacity",0.5);break;case "spinner":c=this.getLoadingView(a);this.show(c);break;default:throw Error(I18n.t("marionette.errors.invalid_loading_type"));}return this.showRealView(b,c,a,e)};a.prototype.showRealView=function(a,c,d,f){return b.execute("when:fetched",d.entities,function(b){return function(){switch(d.loadingType){case "opacity-spinner":g(f.el).toggleWrapper({spinner:!0},
!1);break;case "opacity":g(f.el).removeAttr("style");break;case "spinner":if(f.currentView!==c)return a.close()}null!=d&&d.callback&&d.callback();return b.show(a)}}(this))};a.prototype.getEntities=function(a){return h.chain(a).pick("model","collection").toArray().compact().value()};a.prototype.getLoadingView=function(a){return new c.LoadingView({model:a.entities})};return a}(b.Controllers.Base);return b.commands.setHandler("show:loading",function(b,a){return new c.LoadingController({view:b,region:a.region,
loaderRegion:a.loaderRegion,config:a.loading})})})}).call(this);
