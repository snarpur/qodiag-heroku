root_url: pre_registrations/edit
steps:
  -
    name: subject
    form_content:
      responder_item:
        model: App.Models.Base
        type: NestedModel
        schema:
          id: Hidden
          subject:
            title: personal_info
            model: App.Models.Base
            as: get_subject
            type: NestedModel
            schema:
              id: Hidden
              firstname:
                type: Text
                template: field
                validators: ['required']
              lastname:
                type: Text
                template: field
                validators: ['required']
              cpr:
                type: Text
                template: field
                validators: ['required']
              sex:
                type: Radio
                template: field
                options:
                  -
                    val: female
                    label: girl
                  -
                    val: male
                    label: boy

  - 
    name: contact_info
    form_content:
      responder_item:
        model: App.Models.Base
        type: NestedModel
        schema:
          id: Hidden
          respondent:
            title: personal_info
            model: App.Models.Base
            as: get_respondent
            type: NestedModel
            schema:
              id: Hidden 
              firstname:
                type: Text
                template: field
                validators: ['required']
              lastname:
                type: Text
                template: field
                validators: ['required']
              occupation:
                type: Text
                template: field
              workplace:
                type: Text
                template: field
              address:
                title: address_info
                type: NestedModel
                model: App.Models.Base
                schema:
                  id: Hidden
                  street_1: Text
                  street_2: Text
                  town: Text
                  zip_code: Text
                  phone: Text
                  home_phone: Text

  -
    name: subject_parent
    form_content:
      responder_item:
        model: App.Models.Base
        type: NestedModel
        schema:
          id: Hidden
          subject:
            model: App.Models.Base
            type: NestedModel
            as: get_subject
            schema:
              id: Hidden
              inverse_relations:
                title: personal_info
                type: NestedCollection
                collection: App.Collections.Base
                as: opposite_parent_relation
                schema:
                  id: Hidden
                  firstname:
                    type: Text
                    template: field
                    validators: ['required']
                  lastname:
                    type: Text
                    template: field
                    validators: ['required']
                  occupation:
                    type: Text
                    template: field
                  workplace:
                    type: Text
                    template: field
                  address:
                    title: address_info
                    type: NestedModel
                    model: App.Models.Base
                    schema:
                      id: Hidden
                      street_1: Text
                      street_2: Text
                      town: Text
                      zip_code: Text
                      phone: Text
                      home_phone: Text
                  relationships:
                    title: relations
                    type: NestedCollection
                    collection: App.Collections.Relationships
                    as:
                      - parent_relationship_to_current_subject
                      - guardian_relationship_to_current_subject
                    schema:
                      -
                        id: Hidden
                        person_id: Hidden
                        relation_id: Hidden
                        name: Hidden
                      -
                        id: Hidden
                        person_id: Hidden
                        relation_id: Hidden
                        name: Hidden
                        status:
                          type: Checkbox
                          template: checkbox
                  spouse_relationships:
                    type: NestedCollection
                    collection: App.Collections.Relationships
                    as:
                      - spouse_relationship_through_parenting_of_subject
                    schema:
                      -
                        id: Hidden
                        person_id: Hidden
                        relation_id: Hidden
                        name: Hidden
                        status:
                          type: Checkbox
                          template: checkbox

  -
    name: subject_siblings
    form_content:
      responder_item:
        model: App.Models.Base
        type: NestedModel
        schema:
          id: Hidden
          subject:
            model: App.Models.Base
            type: NestedModel
            as: get_subject
            schema:
              id: Hidden
              full_siblings:
                title: full_siblings
                type: NestedCollection
                collection: App.Collections.Person
                schema:
                  id: Hidden
                  firstname:
                    type: Text
                    template: field
                  lastname:
                    type: Text
                    template: field
                  dateofbirth: Date

              half_siblings:
                title: half_siblings
                type: NestedCollection
                collection: App.Collections.Person
                schema:
                  id: Hidden
                  firstname:
                    type: Text
                    template: field
                  lastname:
                    type: Text
                    template: field
                  dateofbirth: Date

              inverse_half_siblings:
                title: inverse_half_siblings
                type: NestedCollection
                collection: App.Collections.Person
                schema:
                  id: Hidden
                  firstname:
                    type: Text
                    template: field
                  lastname:
                    type: Text
                    template: field
                  dateofbirth: Date

#              foster_siblings:
#                title: foster_siblings
#                type: NestedCollection
#                collection: App.Collections.Person
#                schema:
#                  id: Hidden
#                  firstname:
#                    type: Text
#                    template: field
#                  lastname:
#                    type: Text
#                    template: field
#                  dateofbirth: Date
