form_identifier: guardian_invitation
root_url: invitation/new/3
steps:
  - 
    name: guardian_info
    form_content:
      responder_item:
        model: App.Models.Base
        type: NestedModel
        schema:
          deadline: Date
          id: Hidden
          registration_identifier: Hidden
          caretaker_id: Hidden
          respondent:
            model: App.Models.Base
            type: NestedModel
            as: get_respondent
            schema:
              id: Hidden
              full_cpr:
                type: Text
                template: field
                validators: ['required']
              user:
                as: user_invitation
                model: App.Models.Base
                type: NestedModel
                schema:
                  id: Hidden
                  email:
                    type: Text
                    template: field
                    validators: ['required','email']
                  invitation: Hidden
              firstname:
                type: Text
                template: field
                validators: ['required']
              lastname:
                type: Text
                template: field
                validators: ['required']

  -
    name: patient_info
    form_content:
      responder_item:
        model: App.Models.Base
        type: NestedModel 
        schema:
          id: Hidden
          subject:
            model: App.Models.Base
            type: NestedModel
            as: get_subject
            schema:
              id: Hidden
              full_cpr:
                type: Text
                template: field
                validators: ['required']
              firstname:
                type: Text
                template: field
                validators: ['required']
              lastname:
                type: Text
                template: field
                validators: ['required']
              sex:
                type: Radio
                template: field
                options:
                  -
                    val: female
                    label: girl
                  -
                    val: male
                    label: boy
              inverse_relationships:
                type: NestedCollection
                collection: App.Collections.Relationships
                as:
                  - inverse_parent_relationship_as_current_subject 
                  - inverse_patient_relationship_as_current_subject
                schema:
                  -
                    id: Hidden
                    person_id: Hidden
                    relation_id: Hidden
                    name: Hidden
                    status:
                      type: Checkbox
                      template: checkbox
                  -
                    id: Hidden
                    person_id: Hidden
                    relation_id: Hidden
                    name: Hidden
